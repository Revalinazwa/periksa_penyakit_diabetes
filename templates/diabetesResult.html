<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="../static/img/fav.svg" type="image/svg+xml" />
    <title>Hasil Pemeriksaan Diabetes</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="bg-blue-50 flex justify-center items-center min-h-screen py-10">
    <section
      class="download-area bg-white shadow-xl rounded-xl p-8 w-full max-w-2xl mx-4"
    >
      <!-- Header dengan logo dan judul -->
      <div
        class="flex items-center justify-center mb-6 pb-4 border-b border-gray-200"
      >
        <i class="fas fa-heartbeat text-3xl text-blue-600 mr-3"></i>
        <h1 class="text-3xl font-bold text-blue-700">
          Hasil Pemeriksaan Diabetes
        </h1>
      </div>

      <!-- Informasi Pasien -->
      <div class="bg-gray-50 rounded-lg p-4 mb-6">
        <h2 class="text-lg font-semibold text-gray-700 mb-2 flex items-center">
          <i class="fas fa-user-circle mr-2 text-blue-500"></i> Informasi
          Pemeriksaan
        </h2>
        <div class="grid grid-cols-3 gap-3 text-sm">
          <div class="flex items-center">
            <span class="font-medium text-gray-600">Nama:</span>
            <span class="ml-2 text-gray-800" id="examDate">{{ nama }}</span>
          </div>
          <div class="flex items-center">
            <span class="font-medium text-gray-600">Jenis Kelamin:</span>
            <span class="ml-2 text-gray-800" id="examCode"
              >{{ jenis_kelamin}}</span
            >
          </div>
          <div class="flex items-center">
            <span class="font-medium text-gray-600">Tanggal:</span>
            <span class="ml-2 text-gray-800" id="examCode">{{ tanggal }}</span>
          </div>
        </div>
      </div>

      <!-- Hasil Diagnosis -->
      <div class="mb-8">
        <h2 class="text-xl font-bold text-gray-700 mb-3">Diagnosis:</h2>
        <div
          class="p-4 rounded-lg flex items-center justify-between {% if result == 'Terdiagnosis Diabetes' %}bg-red-100{% else %}bg-green-100{% endif %}"
        >
          <div class="flex items-center">
            <div
              class="w-12 h-12 flex items-center justify-center rounded-full {% if result == 'Terdiagnosis Diabetes' %}bg-red-200 text-red-600{% else %}bg-green-200 text-green-600{% endif %}"
            >
              <i
                class="{% if result == 'Terdiagnosis Diabetes' %}fas fa-exclamation-circle text-2xl{% else %}fas fa-check-circle text-2xl{% endif %}"
              ></i>
            </div>
            <p
              class="ml-4 text-2xl font-bold {% if result == 'Terdiagnosis Diabetes' %}text-red-600{% else %}text-green-600{% endif %}"
            >
              {{ result }}
            </p>
          </div>
          <span
            class="text-4xl {% if result == 'Terdiagnosis Diabetes' %}text-red-500{% else %}text-green-500{% endif %}"
          >
            {% if result == 'Terdiagnosis Diabetes' %}⚠️{% else %}✅{% endif %}
          </span>
        </div>
      </div>

      <!-- Visualisasi Data -->
      <div class="mb-8">
        <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center">
          <i class="fas fa-chart-bar mr-2 text-blue-500"></i> Visualisasi Faktor
          Risiko
        </h2>
        <div class="bg-gray-50 p-4 rounded-lg">
          <canvas id="riskChart" class="w-full h-64 mb-2"></canvas>
        </div>

        <!-- Parameter Pemeriksaan -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
          <div class="p-3 bg-purple-50 rounded-lg text-center">
            <p class="font-semibold text-purple-700">Kehamilan</p>
            <p class="text-2xl font-bold text-purple-800" id="pregnanciesValue">
              {{ pregnancies }}
            </p>
            <p class="text-xs text-gray-500 mt-1">(Jumlah kehamilan)</p>
          </div>
          <div class="p-3 bg-blue-50 rounded-lg text-center">
            <p class="font-semibold text-blue-700">Glukosa</p>
            <p class="text-2xl font-bold text-blue-800" id="glucoseValue">
              {{ glucose }} mg/dL
            </p>
            <p class="text-xs text-gray-500 mt-1">(Normal: 70-99 mg/dL)</p>
          </div>
          <div class="p-3 bg-green-50 rounded-lg text-center">
            <p class="font-semibold text-green-700">Tekanan Darah</p>
            <p class="text-2xl font-bold text-green-800" id="bpValue">
              {{ blood_pressure }} mmHg
            </p>
            <p class="text-xs text-gray-500 mt-1">(Normal: <120/80 mmHg)</p>
          </div>
          <div class="p-3 bg-pink-50 rounded-lg text-center">
            <p class="font-semibold text-pink-700">Ketebalan Kulit</p>
            <p class="text-2xl font-bold text-pink-800" id="skinThicknessValue">
              {{ skin_thickness }} mm
            </p>
            <p class="text-xs text-gray-500 mt-1">(Tricep, Normal: 10-25 mm)</p>
          </div>
          <div class="p-3 bg-indigo-50 rounded-lg text-center">
            <p class="font-semibold text-indigo-700">Insulin</p>
            <p class="text-2xl font-bold text-indigo-800" id="insulinValue">
              {{ insulin }} μU/ml
            </p>
            <p class="text-xs text-gray-500 mt-1">(Normal: <140 μU/ml)</p>
          </div>
          <div class="p-3 bg-yellow-50 rounded-lg text-center">
            <p class="font-semibold text-yellow-700">BMI</p>
            <p class="text-2xl font-bold text-yellow-800" id="bmiValue">
              {{ bmi }} kg/m²
            </p>
            <p class="text-xs text-gray-500 mt-1">(Normal: 18.5-24.9)</p>
          </div>
          <div class="p-3 bg-orange-50 rounded-lg text-center">
            <p class="font-semibold text-orange-700">Fungsi Pedigree</p>
            <p class="text-xl font-bold text-orange-800" id="pedigreeValue">
              {{ diabetes_pedigree_function }}
            </p>
            <p class="text-xs text-gray-500 mt-1">(Riwayat keluarga)</p>
          </div>
          <div class="p-3 bg-red-50 rounded-lg text-center">
            <p class="font-semibold text-red-700">Umur</p>
            <p class="text-2xl font-bold text-red-800" id="ageValue">
              {{ age }} tahun
            </p>
          </div>
        </div>
      </div>

      <!-- Rekomendasi -->
      <div class="mb-8">
        <h2 class="text-xl font-bold text-gray-700 mb-3 flex items-center">
          <i class="fas fa-clipboard-list mr-2 text-blue-500"></i> Rekomendasi
          Medis
        </h2>

        {% if result == 'Terdiagnosis Diabetes' %}
        <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
          <h3 class="text-lg font-bold text-red-700 mb-2">
            Tindakan yang Perlu Dilakukan:
          </h3>
          <ul class="text-left space-y-2 text-gray-700">
            <li class="flex items-start">
              <i class="fas fa-user-md mt-1 mr-2 text-red-500"></i>
              <span
                >Segera konsultasikan hasil pemeriksaan ini kepada dokter umum
                atau dokter spesialis penyakit dalam.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-utensils mt-1 mr-2 text-red-500"></i>
              <span
                >Perhatikan pola makan dengan mengurangi konsumsi gula dan
                karbohidrat berlebih. Konsumsi makanan dengan indeks glikemik
                rendah.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-running mt-1 mr-2 text-red-500"></i>
              <span
                >Rutin berolahraga setidaknya 30 menit sehari, 5 hari dalam
                seminggu. Pilih aktivitas fisik seperti jalan cepat, bersepeda,
                atau berenang.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-weight mt-1 mr-2 text-red-500"></i>
              <span
                >Jaga berat badan ideal dan usahakan untuk menurunkan berat
                badan jika mengalami kelebihan berat badan.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-tint mt-1 mr-2 text-red-500"></i>
              <span
                >Periksa kadar gula darah secara berkala dan patuhi jadwal
                pemeriksaan yang disarankan dokter.</span
              >
            </li>
          </ul>

          <div class="mt-4 pt-4 border-t border-red-200">
            <p class="text-red-600 font-semibold">
              Gejala yang perlu diwaspadai:
            </p>
            <div class="grid grid-cols-2 gap-2 mt-2">
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                Sering haus
              </div>
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                Sering buang air kecil
              </div>
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                Penurunan berat badan
              </div>
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i> Luka
                sulit sembuh
              </div>
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                Sering Merasa Lapar
              </div>
              <div class="flex items-center">
                <i class="fas fa-exclamation-circle text-red-500 mr-2"></i>
                Merasa Kebas
              </div>
            </div>
          </div>
        </div>
        {% else %}
        <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
          <h3 class="text-lg font-bold text-green-700 mb-2">
            Tetap Jaga Kesehatan!
          </h3>
          <ul class="text-left space-y-2 text-gray-700">
            <li class="flex items-start">
              <i class="fas fa-apple-alt mt-1 mr-2 text-green-500"></i>
              <span
                >Terus jaga pola makan sehat dan seimbang dengan konsumsi sayur,
                buah, dan serat yang cukup.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-heartbeat mt-1 mr-2 text-green-500"></i>
              <span
                >Aktif bergerak dan rutin berolahraga minimal 150 menit per
                minggu untuk menjaga metabolisme tubuh tetap baik.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-bed mt-1 mr-2 text-green-500"></i>
              <span
                >Hindari stres berlebih dan pastikan istirahat yang cukup (7-8
                jam sehari).</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-hospital mt-1 mr-2 text-green-500"></i>
              <span
                >Lakukan pemeriksaan kesehatan secara rutin setidaknya 1 tahun
                sekali.</span
              >
            </li>
            <li class="flex items-start">
              <i class="fas fa-wine-bottle mt-1 mr-2 text-green-500"></i>
              <span
                >Hindari konsumsi alkohol berlebih dan jangan merokok untuk
                menjaga kesehatan jantung dan pembuluh darah.</span
              >
            </li>
          </ul>

          <div class="mt-4 pt-4 border-t border-green-200">
            <p class="text-green-600 font-semibold">
              Tips pencegahan diabetes:
            </p>
            <div class="grid grid-cols-2 gap-2 mt-2">
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2"></i> Batasi
                makanan manis
              </div>
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2"></i> Jaga
                berat badan ideal
              </div>
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2"></i> Minum
                air putih cukup
              </div>
              <div class="flex items-center">
                <i class="fas fa-check-circle text-green-500 mr-2"></i> Rutin
                cek kesehatan
              </div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Edukasi Diabetes -->
      <div class="mb-8">
        <h2 class="text-xl font-bold text-gray-700 mb-3 flex items-center">
          <i class="fas fa-book-medical mr-2 text-blue-500"></i> Edukasi
          Diabetes
        </h2>
        <div class="bg-blue-50 p-4 rounded-lg">
          <p class="text-gray-700 mb-3">
            Diabetes adalah kondisi kronis yang terjadi ketika kadar gula
            (glukosa) dalam darah terlalu tinggi. Hal ini terjadi karena tubuh
            tidak dapat memproduksi insulin yang cukup atau tidak dapat
            menggunakan insulin secara efektif.
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
            <div class="bg-white p-3 rounded shadow-sm">
              <h3 class="font-semibold text-blue-700 mb-1">Tipe Diabetes</h3>
              <ul class="text-sm text-gray-700 space-y-1">
                <li>
                  <span class="font-medium">Tipe 1:</span> Autoimun, tubuh tidak
                  memproduksi insulin
                </li>
                <li>
                  <span class="font-medium">Tipe 2:</span> Resistensi insulin,
                  paling umum terjadi
                </li>
                <li>
                  <span class="font-medium">Gestasional:</span> Terjadi saat
                  kehamilan
                </li>
              </ul>
            </div>
            <div class="bg-white p-3 rounded shadow-sm">
              <h3 class="font-semibold text-blue-700 mb-1">Faktor Risiko</h3>
              <ul class="text-sm text-gray-700 space-y-1">
                <li>Riwayat keluarga dengan diabetes</li>
                <li>Kelebihan berat badan dan obesitas</li>
                <li>Kurang aktivitas fisik</li>
                <li>Tekanan darah tinggi atau kolesterol tinggi</li>
              </ul>
            </div>
          </div>

          <!-- Informasi Parameter Penting -->
          <div class="mt-4 bg-white p-3 rounded shadow-sm">
            <h3 class="font-semibold text-blue-700 mb-1">
              Pemahaman Parameter Diabetes
            </h3>
            <div class="text-sm text-gray-700 space-y-1">
              <p>
                <span class="font-medium">Glukosa:</span> Kadar gula dalam darah
                setelah puasa 2 jam. Nilai normal: 70-99 mg/dL.
              </p>
              <p>
                <span class="font-medium">Insulin:</span> Hormon yang mengatur
                gula darah. Nilai normal: 16-166 μU/ml.
              </p>
              <p>
                <span class="font-medium">BMI (Indeks Massa Tubuh):</span>
                Ukuran kondisi berat badan. BMI normal: 18.5-24.9 kg/m².
              </p>
              <p>
                <span class="font-medium">Fungsi Pedigree Diabetes:</span> Skor
                yang menunjukkan riwayat diabetes dalam keluarga. Nilai lebih
                tinggi mengindikasikan risiko lebih besar.
              </p>
              <p>
                <span class="font-medium">Tekanan Darah:</span> Tekanan darah
                sistolik. Normal: <120 mmHg.
              </p>
              <p>
                <span class="font-medium">Ketebalan Kulit Tricep:</span>
                Mengukur lemak subkutan. Normal: 10-25 mm.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Disclaimer -->
      <div class="text-xs text-gray-500 italic mb-6 bg-gray-50 p-3 rounded">
        <p>
          Hasil ini hanya bersifat informatif dan tidak menggantikan diagnosis
          medis dari profesional kesehatan. Silakan konsultasikan dengan dokter
          untuk diagnosis dan penanganan yang tepat.
        </p>
      </div>

      <!-- Input tersembunyi untuk data -->
      <input type="hidden" id="pregnancies" value="{{ pregnancies }}" />
      <input type="hidden" id="glucose" value="{{ glucose }}" />
      <input type="hidden" id="blood_pressure" value="{{ blood_pressure }}" />
      <input type="hidden" id="skin_thickness" value="{{ skin_thickness }}" />
      <input type="hidden" id="insulin" value="{{ insulin }}" />
      <input type="hidden" id="bmi" value="{{ bmi }}" />
      <input
        type="hidden"
        id="diabetes_pedigree_function"
        value="{{ diabetes_pedigree_function }}"
      />
      <input type="hidden" id="age" value="{{ age }}" />
      <input type="hidden" id="examDate" value="date" />

      <!-- Tombol aksi -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="/diabetesCheck"
          class="flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition shadow-md"
        >
          <i class="fas fa-redo-alt mr-2"></i> Periksa Lagi
        </a>
        <button
          onclick="downloadPDF()"
          class="flex cursor-pointer items-center justify-center bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition shadow-md"
        >
          <i class="fa-solid fa-print mr-2"></i> Cetak Laporan
        </button>
      </div>

      <!-- Footer -->
      <div
        class="mt-8 pt-4 border-t border-gray-200 text-center text-sm text-gray-500"
      >
        <p>&copy; <span id="copyright"></span> Sistem Pemeriksaan Diabetes</p>
        <p class="mt-1">
          Untuk informasi lebih lanjut kunjungi
          <a href="#" class="text-blue-600">website kami</a>
        </p>
      </div>
    </section>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/diabetesResult.js') }}"></script>
  </body>
</html>
