<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="../static/img/fav.svg" type="image/svg+xml" />

    <title>Hasil Rekomendasi</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="bg-gray-50">
    <!-- User Profile Card -->
    <section class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
      <div class="bg-gradient-to-r from-green-500 to-teal-400 py-6 px-6">
        <h2 class="text-2xl font-bold text-white">Profil {{ nama }}</h2>
      </div>
      <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-green-50 p-4 rounded-lg">
          <h3 class="font-semibold text-green-700 mb-2">
            <i class="fa-solid fa-user-circle mr-2"></i>Informasi Pribadi
          </h3>
          <ul class="space-y-2 text-gray-700">
            <li><span class="font-medium">Umur:</span> {{ umur }} tahun</li>
            <li>
              <span class="font-medium">Jenis Kelamin:</span> {{ jenis_kelamin
              }}
            </li>
            <li>
              <span class="font-medium">Berat Badan:</span> {{ berat }} kg
            </li>
            <li>
              <span class="font-medium">Tinggi Badan:</span> {{ tinggi }} cm
            </li>
            <li>
              <span class="font-medium">Level Aktivitas:</span> {{ aktivitas }}
            </li>
          </ul>
        </div>
        <div class="bg-teal-50 p-4 rounded-lg">
          <h3 class="font-semibold text-teal-700 mb-2">
            <i class="fa-solid fa-heart-pulse mr-2"></i>Kondisi Kesehatan
          </h3>
          {% if kondisi_kesehatan %}
          <ul class="space-y-2 text-gray-700">
            {% for kondisi in kondisi_kesehatan %}
            <li>
              <i class="fa-solid fa-check-circle text-teal-500 mr-2"></i>{{
              kondisi }}
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p class="text-gray-700">Tidak ada kondisi kesehatan khusus</p>
          {% endif %}
        </div>
        <div class="bg-blue-50 p-4 rounded-lg">
          <h3 class="font-semibold text-blue-700 mb-2">
            <i class="fa-solid fa-calculator mr-2"></i>Kebutuhan Harian
          </h3>
          <ul class="space-y-2 text-gray-700">
            <li>
              <span class="font-medium">Target Diet:</span> {{ target_diet }}
            </li>
            <li>
              <span class="font-medium">Kebutuhan Kalori:</span> {{
              kebutuhan_kalori }} kkal/hari
            </li>
            <li>
              <span class="font-medium">Kebutuhan Air:</span> {{ kebutuhan_air
              }} liter/hari
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Diet Recommendation -->
    <section class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
      <div class="bg-gradient-to-r from-blue-500 to-indigo-500 py-6 px-6">
        <h2 class="text-2xl font-bold text-white">Rekomendasi Makanan</h2>
        <p class="text-blue-100">Berdasarkan profil dan target diet Anda</p>
      </div>

      <div class="overflow-x-auto p-6">
        <table class="min-w-full divide-y divide-gray-200">
          <thead>
            <tr class="bg-gray-50">
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Nama Makanan
              </th>
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Energi (kkal)
              </th>
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Protein (g)
              </th>
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Lemak (g)
              </th>
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Karbohidrat (g)
              </th>
              <th
                class="px-4 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Serat (g)
              </th>
              <th
                class="px-4 py-3 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider"
              >
                Nutrisi
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            {% for index, row in rekomendasi.iterrows() %}
            <tr class="hover:bg-gray-50 transition duration-150">
              <td class="px-4 py-3 text-sm font-medium text-gray-900">
                {{ row['Nama Bahan Makanan'] }}
              </td>
              <td class="px-4 py-3 text-sm text-gray-700">
                {{ row['Energi (Kal)'] }}
              </td>
              <td class="px-4 py-3 text-sm text-gray-700">
                {{ row['Protein (g)'] }}
              </td>
              <td class="px-4 py-3 text-sm text-gray-700">
                {{ row['Lemak (g)'] }}
              </td>
              <td class="px-4 py-3 text-sm text-gray-700">
                {{ row['Karbohidrat (g)'] }}
              </td>
              <td class="px-4 py-3 text-sm text-gray-700">
                {{ row['Serat (g)'] }}
              </td>
              <td class="px-4 py-3 text-center">
                <button
                  class="text-blue-500 hover:text-blue-700 cursor-pointer"
                  data-food='{{ row["Nama Bahan Makanan"]|tojson }}'
                  data-calories='{{ row["Energi (Kal)"] }}'
                  data-protein='{{ row["Protein (g)"] }}'
                  data-fat='{{ row["Lemak (g)"] }}'
                  data-carbs='{{ row["Karbohidrat (g)"] }}'
                  data-fiber='{{ row["Serat (g)"] }}'
                  onclick="handleButtonClick(this)"
                >
                  <i class="fa-solid fa-chart-pie"></i>
                </button>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <!-- Nutrition Visualization -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
      <!-- Nutrition Chart -->
      <section class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 py-4 px-6">
          <h2 class="text-xl font-bold text-white">Analisis Nutrisi</h2>
        </div>
        <div class="p-6">
          <canvas id="nutritionChart" height="h-fit"></canvas>
        </div>
      </section>

      <!-- Diet Information -->
      <section class="bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="bg-gradient-to-r from-yellow-500 to-orange-500 py-4 px-6">
          <h2 class="text-xl font-bold text-white">Informasi Target Diet</h2>
        </div>
        <div class="p-6">
          <div id="dietInfo" class="text-gray-700">
            {% if target_diet == 'Diet Rendah Kalori' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Rendah Kalori
            </h3>
            <p class="mb-4">
              Diet rendah kalori dirancang untuk mengurangi asupan energi
              sehari-hari untuk mencapai dan mempertahankan berat badan yang
              sehat.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Batasi asupan kalori harian sekitar 1500-1800 kalori</li>
              <li>Fokus pada makanan tinggi nutrisi dan rendah kalori</li>
              <li>Perhatikan ukuran porsi dan hindari makanan olahan</li>
              <li>
                Kombinasikan dengan aktivitas fisik untuk hasil yang optimal
              </li>
            </ul>
            {% elif target_diet == 'Diet Tinggi Protein' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Tinggi Protein
            </h3>
            <p class="mb-4">
              Diet tinggi protein bermanfaat untuk pembentukan dan perbaikan
              otot, serta membuat Anda merasa kenyang lebih lama.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Konsumsi 1.6-2.2 gram protein per kg berat badan</li>
              <li>
                Pilih sumber protein berkualitas seperti telur, ikan, daging
                tanpa lemak
              </li>
              <li>Distribusikan asupan protein secara merata sepanjang hari</li>
              <li>Tetap perhatikan asupan lemak dan karbohidrat seimbang</li>
            </ul>
            {% elif target_diet == 'Diet Rendah Lemak' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Rendah Lemak
            </h3>
            <p class="mb-4">
              Diet rendah lemak dapat membantu mengurangi kalori dan risiko
              penyakit jantung.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>
                Batasi asupan lemak hingga 20-30% dari total kalori harian
              </li>
              <li>
                Pilih sumber protein tanpa lemak dan produk susu rendah lemak
              </li>
              <li>Kurangi konsumsi makanan yang digoreng dan olahan</li>
              <li>Tingkatkan asupan buah, sayuran, dan biji-bijian utuh</li>
            </ul>
            {% elif target_diet == 'Diet Tinggi Serat' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Tinggi Serat
            </h3>
            <p class="mb-4">
              Diet tinggi serat mendukung kesehatan pencernaan dan membantu
              mengontrol kadar gula darah.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Targetkan asupan serat 25-30 gram per hari</li>
              <li>
                Konsumsi banyak sayuran, buah-buahan, dan biji-bijian utuh
              </li>
              <li>Tingkatkan asupan kacang-kacangan dan biji-bijian</li>
              <li>Tingkatkan asupan air untuk mendukung pencernaan serat</li>
            </ul>
            {% elif target_diet == 'Diet Rendah Karbohidrat dan Tinggi Serat' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Rendah Karbohidrat dan Tinggi Serat
            </h3>
            <p class="mb-4">
              Diet ini ideal untuk mengontrol gula darah dan mendukung kesehatan
              metabolik, terutama untuk penderita diabetes.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Batasi karbohidrat hingga 50-100 gram per hari</li>
              <li>Pilih karbohidrat kompleks dengan indeks glikemik rendah</li>
              <li>Tingkatkan asupan serat dari sayuran non-pati</li>
              <li>Pantau kadar gula darah secara teratur</li>
            </ul>
            {% elif target_diet == 'Diet Rendah Sodium' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Rendah Sodium
            </h3>
            <p class="mb-4">
              Diet rendah sodium penting untuk mengontrol tekanan darah dan
              mendukung kesehatan jantung.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Batasi asupan natrium hingga 1500-2300 mg per hari</li>
              <li>Hindari makanan olahan dan fast food</li>
              <li>Gunakan rempah-rempah dan herba sebagai pengganti garam</li>
              <li>Baca label makanan dan pilih produk rendah natrium</li>
            </ul>
            {% elif target_diet == 'Diet Rendah Lemak dan Kolesterol' %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Rendah Lemak dan Kolesterol
            </h3>
            <p class="mb-4">
              Diet ini dirancang untuk mendukung kesehatan jantung dan
              mengurangi risiko penyakit kardiovaskular.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Batasi asupan lemak jenuh dan trans</li>
              <li>Kurangi konsumsi daging merah dan makanan olahan</li>
              <li>
                Pilih sumber lemak sehat seperti alpukat, kacang-kacangan, dan
                ikan
              </li>
              <li>
                Tingkatkan konsumsi serat larut untuk membantu menurunkan
                kolesterol
              </li>
            </ul>
            {% else %}
            <h3 class="font-bold text-lg text-orange-600 mb-2">
              Diet Seimbang
            </h3>
            <p class="mb-4">
              Diet seimbang mendukung kesehatan secara keseluruhan dengan
              menyediakan semua nutrisi penting yang dibutuhkan tubuh.
            </p>
            <ul class="list-disc pl-5 space-y-2">
              <li>Konsumsi berbagai makanan dari semua kelompok makanan</li>
              <li>
                Seimbangkan karbohidrat, protein, dan lemak dalam setiap makanan
              </li>
              <li>Prioritaskan makanan utuh dan meminimalkan makanan olahan</li>
              <li>Perhatikan ukuran porsi dan kebutuhan kalori</li>
            </ul>
            {% endif %}
          </div>
        </div>
      </section>
    </div>

    <!-- Health Tips -->
    <section class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
      <div class="bg-gradient-to-r from-green-500 to-emerald-500 py-4 px-6">
        <h2 class="text-xl font-bold text-white">Tips Kesehatan Untuk Anda</h2>
      </div>
      <div class="p-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-emerald-50 p-4 rounded-lg">
          <div class="flex items-center mb-3">
            <div class="bg-emerald-500 text-white p-3 rounded-full mr-3">
              <i class="fa-solid fa-utensils"></i>
            </div>
            <h3 class="font-bold text-emerald-700">Pola Makan</h3>
          </div>
          <ul class="space-y-2 text-gray-700">
            <li>
              <i class="fa-solid fa-check text-emerald-500 mr-2"></i>Makan dalam
              porsi kecil tapi sering
            </li>
            <li>
              <i class="fa-solid fa-check text-emerald-500 mr-2"></i>Kunyah
              makanan perlahan
            </li>
            <li>
              <i class="fa-solid fa-check text-emerald-500 mr-2"></i>Hindari
              makan larut malam
            </li>
          </ul>
        </div>
        <div class="bg-blue-50 p-4 rounded-lg">
          <div class="flex items-center mb-3">
            <div class="bg-blue-500 text-white p-3 rounded-full mr-3">
              <i class="fa-solid fa-person-running"></i>
            </div>
            <h3 class="font-bold text-blue-700">Aktivitas Fisik</h3>
          </div>
          <ul class="space-y-2 text-gray-700">
            <li>
              <i class="fa-solid fa-check text-blue-500 mr-2"></i>Lakukan
              olahraga 30 menit/hari
            </li>
            <li>
              <i class="fa-solid fa-check text-blue-500 mr-2"></i>Kombinasikan
              kardio dan latihan kekuatan
            </li>
            <li>
              <i class="fa-solid fa-check text-blue-500 mr-2"></i>Perbanyak
              aktivitas sehari-hari
            </li>
          </ul>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg">
          <div class="flex items-center mb-3">
            <div class="bg-purple-500 text-white p-3 rounded-full mr-3">
              <i class="fa-solid fa-heart"></i>
            </div>
            <h3 class="font-bold text-purple-700">Gaya Hidup</h3>
          </div>
          <ul class="space-y-2 text-gray-700">
            <li>
              <i class="fa-solid fa-check text-purple-500 mr-2"></i>Tidur 7-8
              jam setiap hari
            </li>
            <li>
              <i class="fa-solid fa-check text-purple-500 mr-2"></i>Kelola stres
              dengan meditasi
            </li>
            <li>
              <i class="fa-solid fa-check text-purple-500 mr-2"></i>Minum cukup
              air setiap hari
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section
      class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl shadow-lg overflow-hidden mb-8 text-white"
    >
      <div class="p-8 text-center">
        <h2 class="text-2xl font-bold mb-3">
          Mulai Perjalanan Diet Anda Sekarang
        </h2>
        <p class="mb-6 text-blue-100">
          Konsultasikan dengan ahli gizi untuk hasil yang lebih optimal
        </p>
        <div class="flex justify-center gap-4">
          <a
            href="/dietRecommendation"
            class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-6 rounded-lg border border-blue-200 transition duration-200"
          >
            <i class="fas fa-redo-alt mr-2"></i>Rekomendasi Lagi
          </a>
          <a
            href="/cetak-rekomendasi"
            class="bg-white text-blue-600 hover:bg-blue-50 font-bold py-2 px-6 rounded-lg transition duration-200"
          >
            <i class="fa-solid fa-print mr-2"></i>Cetak Rekomendasi
          </a>
        </div>
      </div>
    </section>

    <!-- Nutrition Modal -->
    <div
      id="nutritionModal"
      class="w-full h-full fixed inset-0 backdrop-blur-xs bg-opacity-50 hidden items-center justify-center z-50"
    >
      <div class="bg-white rounded-xl max-w-1/2 w-full p-6 h-fit">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold" id="modalFoodName">Detail Nutrisi</h3>
          <button
            onclick="closeModal()"
            class="text-gray-500 hover:text-gray-700"
          >
            <i class="fa-solid fa-times text-xl"></i>
          </button>
        </div>
        <div class="flex">
          <div class="w-3/4">
            <canvas id="modalNutritionChart" class="h-fit"></canvas>
          </div>
          <div class="gap-2 w-1/4">
            <div class="bg-blue-50 p-3 rounded">
              <span class="text-sm text-gray-600">Energi</span>
              <p class="font-bold text-blue-600">
                <span id="modalCalories">0</span> kkal
              </p>
            </div>
            <div class="bg-red-50 p-3 rounded">
              <span class="text-sm text-gray-600">Protein</span>
              <p class="font-bold text-red-600">
                <span id="modalProtein">0</span> g
              </p>
            </div>
            <div class="bg-yellow-50 p-3 rounded">
              <span class="text-sm text-gray-600">Lemak</span>
              <p class="font-bold text-yellow-600">
                <span id="modalFat">0</span> g
              </p>
            </div>
            <div class="bg-green-50 p-3 rounded">
              <span class="text-sm text-gray-600">Karbohidrat</span>
              <p class="font-bold text-green-600">
                <span id="modalCarbs">0</span> g
              </p>
            </div>
            <div class="bg-purple-50 p-3 rounded">
              <span class="text-sm text-gray-600">Serat</span>
              <p class="font-bold text-purple-600">
                <span id="modalFiber">0</span> g
              </p>
            </div>
          </div>
        </div>
        <div class="w-full flex justify-center mt-3">
          <button
            onclick="closeModal()"
            class="w-3/4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition duration-200"
          >
            Tutup
          </button>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="{{ url_for('static', filename='js/dietResult.js') }}"></script>
  </body>
</html>
